<%= form_with(model: @appointment, local: true) do |form| %>

  <%= render 'common/errors', resource: @appointment %>

  <p><div class="field">
    <%= form.label :user %>
    <%= form.collection_select :user_id, User.all, :id, :name %>
  </div></p>

  <p><div class="field">
    <%= form.label :doctor %>
    <%= form.collection_select :doctor_id, Doctor.all, :id, :name %>
  </div></p>
  <p>
    <% if !@appointment.new_record? %>
      <div class="field">
        <%= form.label :recommendation, "Описание" %>
        <%= form.text_area :recommendation,
                  :rows => 13,
                  :cols => 50 ,
                  :maxlength => 240,
                  :autocomplete => :off %>
      </div>
    <% else %>
      <% @appointment.status = true %>
      <%= form.hidden_field :status %>
    <% end %>
  </p>
    <div class="actions">
      <%= form.submit "#{ @appointment.new_record? ? 'Создать' : 'Изменить' }" %>
    </div>
  </p>

<% end %>
